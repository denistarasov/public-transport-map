Проект

данные
собиралка
отчет

Вопросы:
там построчно в routeFiles.forEach(routeStr => {
нужно распихать по каким файлам? маршруты, остановки отдельно или как?


Берем отсюда
http://transport.orgp.spb.ru/Portal/transport/routes
ссылки на маршруты (визуально -- лупа на зеленом фоне)
смотрим, как страница получает список маршрутов
получает она их из http://transport.orgp.spb.ru/Portal/transport/routes/list
как получали: нажимаем на F12 в хроме -> смотрим на вкладку 'Network' -> XHR -> list -> Headers -> From Data
загружаем Form Data в Postman и пробуем повторить запрос, попутно убирая ненужные параметры и пытаясь за раз получить весь доступный транспорт (на момент создания проекта, всего маршрутов было 465), для получения всех маршрутов увеличим параметр 'iDisplayLength' до 1000
Получилось. Теперь повторяем это в JS. Для этого у Postman'а есть удобная кнопка Code, которая позволяет преобразовать строку с параметрами и др. сразу в код. В моем случае пользуемся модулем requests.
В итоге в файл '${transport_type}_routes.json' записаны маршруты соответствующего вида транспорта.

Теперь вычленим из них id маршрутов и запросим информацию о каждом из них

TRANSFORM


ПРОБЛЕМЫ
node -> nodejs, лечиться ln -s /usr/bin/nodejs /usr/bin/node



// НЕ РАБОТАЕТ
const request = require('request');

const parse_route = (id) => {
  const url = `http://transport.orgp.spb.ru/Portal/js/dataTables_ru.json?_=1489485581634`;
  request({
    url,
  }, (err, res, body) => {
    console.log(body);
  });
};







Потом будем заходить на ссылки типа http://transport.orgp.spb.ru/Portal/transport/route/1077

http://transport.orgp.spb.ru/Portal/transport/map/poi?ROUTE=1077&REQUEST=GetFeature&_=1488372392174

ROUTE=1077 -- номер маршрута
REQUEST=GetFeature -- имя реквеста?
1488372392174 -- cookies?






------------------------------------------------------
Картинки лучше всавить не ссылкой, а картинкой +
Ссылка на карту лебедева ведет не на страницу карты +
Чем хорошо автоматизировать отрисовку схем? +
Почему подходит формат веб-приложения? +
Указать источники ссылками
не указана сложность в плане +


Набрать кучу фич и постепенно воплощать некоторые из них
На 4 в марте: иметь 
Сайт лебедева про процесс создания карты метро

Берлинский метрополитен и его разделение стеной (некоторые ветки оказались обрезанными)

Амстердам
Балтимор
Стокгольм
Копенгаген
Минск
Будапешт
Япония?
Питер

http://wikiroutes.info/spb/catalog -- список маршрутов автобусов
http://transport.orgp.spb.ru/Portal/transport/routes -- официальный список маршрутов, openstreetmaps
собственно, сайт openstreetmaps




Тарасов Денис Вадимович, группа БПМИ-155, тема "Схема общественного транспорта для Санкт-Петербурга"

В первую очередь планируется сделать схему для метро. Для этого было проведено некое исследование имеющихся карт метро в интернете. Ниже описано, что было обнаружено:

- официальная схема выглядит не сильно красиво, особенно на контрасте со схемой московского метрополитена
- схема, нарисованная автором для своей статьи на тему альтернативной истории развития России, в частности, Петербургского метрополитена. [http://vignette3.wikia.nocookie.net/althistory/images/2/2a/%D0%9F%D0%B5%D1%82%D0%B5%D1%80%D0%B1%D1%83%D1%80%D0%B3%D1%81%D0%BA%D0%BE%D0%B5_%D0%BC%D0%B5%D1%82%D1%80%D0%BE.png/revision/latest?cb=20140401121732&path-prefix=ru]
- точная географическая схема, наложенная на настоящую карту Петербурга с официального сайта метро, на которой отражена стратегия развития метрополитена до 2025 года [http://www.metro.spb.ru/uploads/img/map/metromap2025.jpg]
- альтернативная рисовка карта с "закруглением" веток метро http://img-fotki.yandex.ru/get/6521/84280170.32/0_7b6d4_e660a013_XXL.jpg
- схема Лебедева, выглядит довольно красиво
- приложение Яндекс.Метро

Актуальность: я родился в Санкт-Петербурге и с детства обожаю метро. Мне очень жаль, что в Москве руководство метрополитена обратилось в специальное дизайн-агентство, чтобы создать красивую и понятную схему. В Петербурге в то же время, схема до сих пор выглядит несколько архаично. Поэтому мне хотелось бы создать такую схему, на которую было бы приятно смотреть, которая была бы функциональной и которую можно делать автоматически.

Технологии: планирую сделать все в JS, возможно, сбор данных будет осуществлен с помощью Python

Предполагаемые возможности (список фич к возможной реализации):
- сбор данных с Википедии, OpenStreetMaps
- кратчайшее расстояние между двумя станциями (как в приложении Яндекс.Метро)
- возможность менять цвет, названия и масштаб
- остановки, которые находятся на заданном временном/географическом расстоянии от выбранной станции
- экспорт в картинку
- возможность посмотреть этапы развития метро по годам


-----------------------------------------
